# راهنمای نصب بات روی Windows Server 2012

سرور هیچ وابستگی نصب ندارد. این مراحل را دنبال کن:

**نکته:** برای دیپلوی با SSH، ابتدا OpenSSH Server را روی سرور فعال کن. اگر SSH نداری، از روش دستی (RDP + کپی فایل) استفاده کن.

---

## مرحله ۱: کپی فایل‌ها روی سرور

فایل‌های پوشه `C:\Users\Administrator\Desktop\bot` را روی سرور در `C:\ritzobet-bot` کپی کن:

- bot.py
- config.json
- .env
- serve_apk.py
- requirements.txt
- پوشه assets/
- پوشه data/
- **setup_server.ps1**

**روش‌های کپی:**
- RDP: اتصال از راه دور و کپی-پیست
- پنل KVM: آپلود فایل (اگر پشتیبانی می‌کند)
- شبکه مشترک یا USB

---

## مرحله ۲: اجرای نصب روی سرور

### روش آسان: فایل Batch

1. به پنل KVM برو: https://ru1kvm.hidata.org:4083
2. Console ویندوز را باز کن
3. به پوشه بات برو و **install_and_run.bat** را با **Run as Administrator** اجرا کن (کلیک راست روی فایل)

### روش PowerShell

```powershell
cd C:\ritzobet-bot
Set-ExecutionPolicy Bypass -Scope Process -Force
.\setup_server.ps1
```

اسکریپت به‌صورت خودکار:
- Python 3.10 را نصب می‌کند (اگر نصب نباشد)
- وابستگی‌ها را با pip نصب می‌کند
- بات را اجرا می‌کند

---

## مرحله ۳ (اختیاری): نصب دستی Python

اگر اسکریپت خطا داد، Python را دستی نصب کن:

1. از https://www.python.org/downloads/release/python-31011/ فایل **Windows installer (64-bit)** را دانلود کن
2. نصب کن و گزینه **Add Python to PATH** را فعال کن
3. در PowerShell اجرا کن:

```powershell
cd C:\ritzobet-bot
pip install -r requirements.txt
python bot.py
```

---

## ریستارت بات

```powershell
taskkill /F /IM python.exe
cd C:\ritzobet-bot
Start-Process python -ArgumentList "bot.py" -WindowStyle Hidden -RedirectStandardOutput "bot.log" -RedirectStandardError "bot.log"
```

---

## بررسی لاگ

```powershell
Get-Content C:\ritzobet-bot\bot.log -Tail 30
```

---

## دیپلوی با یک کامند (اگر SSH فعال است)

```powershell
cd C:\Users\Administrator\Desktop\bot
.\deploy_windows.ps1
```

این اسکریپت فایل‌ها را کپی می‌کند و `setup_server.ps1` را روی سرور اجرا می‌کند (نصب Python، pip، و اجرای بات).
