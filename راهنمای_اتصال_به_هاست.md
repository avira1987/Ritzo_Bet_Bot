# راهنمای اتصال به هاست و اجرای بات

## اطلاعات سرور (ویندوز)

| مورد | مقدار |
|------|-------|
| آی‌پی | 5.188.82.107 |
| کاربری | administrator |
| رمز عبور | H@d4SWfveqGF |
| پنل مدیریت | https://ru1kvm.hidata.org:4083 |
| کاربری پنل | sahand.samavati94@gmail.com |

---

## روش ۱: از طریق پنل KVM (Console ویندوز)

1. به آدرس https://ru1kvm.hidata.org:4083 بروید
2. با sahand.samavati94@gmail.com و رمز H@d4SWfveqGF وارد شوید
3. بخش **Console** یا **VNC** را باز کنید (ترمینال ویندوز)
4. در PowerShell این دستورات را اجرا کنید:

```powershell
# بررسی وضعیت
Get-Process python* -ErrorAction SilentlyContinue

# متوقف کردن
taskkill /F /IM python.exe
Start-Sleep 2

# رفتن به پوشه بات
cd C:\ritzobet-bot

# اجرای سرور دانلود APK (لینک مستقیم، بدون محدودیت ۵۰ مگ)
Start-Process python -ArgumentList "serve_apk.py" -WindowStyle Hidden -RedirectStandardOutput "serve_apk.log" -RedirectStandardError "serve_apk.log"
Start-Sleep 1

# اجرای بات
Start-Process python -ArgumentList "bot.py" -WindowStyle Hidden -RedirectStandardOutput "bot.log" -RedirectStandardError "bot.log"

# بررسی
Get-Process python*
Get-Content bot.log -Tail 20
```

**لینک مستقیم دانلود:** `http://5.188.82.107:8080/RitzoBet.apk` (در config تنظیم شده)

⚠️ **فایروال:** پورت ۸۰۸۰ باید باز باشد تا کاربران بتوانند APK را دانلود کنند.

---

## روش ۲: دیپلوی با اسکریپت (سرور ویندوز)

```powershell
cd C:\Users\Administrator\Desktop\bot
.\deploy_windows.ps1
```

رمز عبور: H@d4SWfveqGF

---

## روش ۳: آپلود دستی فایل‌ها

1. فایل‌های زیر را از `C:\Users\Administrator\Desktop\bot` در `C:\ritzobet-bot` روی سرور قرار دهید:
   - bot.py, config.json, .env, serve_apk.py
   - **پوشه assets/** (حتماً شامل banner.png باشد)
   - **فایل RitzoBet.apk** (در ریشه پروژه یا داخل assets/)
   - **اگر APK بزرگ‌تر از ۵۰ مگ است:** در `config.json` مقدار `download_apk.url` را به لینک مستقیم دانلود تنظیم کنید (مثلاً `http://IP:8080/RitzoBet.apk` اگر serve_apk.py اجرا شود)
   - پوشه data/

2. روی سرور نصب کنید: `pip install -r requirements.txt`

3. بات را اجرا کنید (دستورات بالا)

---

## روش ۴: اگر سرور همان ویندوز فعلی است (کپی محلی)

اگر هر دو پوشه `Desktop\bot` و `ritzobet-bot` روی همان ماشین هستند:

```powershell
cd C:\Users\Administrator\Desktop\bot
.\apply_updates.ps1
```

این اسکریپت فایل‌ها را کپی و بات را ری‌استارت می‌کند.

---

## روش ۵: آپلود با فایل ZIP (وقتی SSH کار نمی‌کند)

1. فایل `ritzobet-bot-deploy.zip` در `C:\Users\Administrator\Desktop\bot` ساخته شده است.
2. از طریق پنل KVM یا RDP به سرور وصل شوید.
3. فایل ZIP را به سرور منتقل کنید و در `C:\` قرار دهید (نام: `ritzobet-bot-deploy.zip`).
4. در PowerShell روی سرور:

```powershell
taskkill /F /IM python.exe 2>$null
New-Item -ItemType Directory -Path C:\ritzobet-bot -Force | Out-Null
Expand-Archive -Path C:\ritzobet-bot-deploy.zip -DestinationPath C:\ritzobet-bot-temp -Force
Copy-Item C:\ritzobet-bot-temp\* C:\ritzobet-bot\ -Recurse -Force
Remove-Item C:\ritzobet-bot-temp -Recurse -Force
cd C:\ritzobet-bot
Start-Process python -ArgumentList "serve_apk.py" -WindowStyle Hidden -RedirectStandardOutput "serve_apk.log" -RedirectStandardError "serve_apk.log"
Start-Sleep 1
Start-Process python -ArgumentList "bot.py" -WindowStyle Hidden -RedirectStandardOutput "bot.log" -RedirectStandardError "bot.log"
Write-Host "Done! APK: http://5.188.82.107:8080/RitzoBet.apk"
```

---

## یک کامند برای دیپلوی (کپی و در PowerShell اجرا کن)

```powershell
cd C:\Users\Administrator\Desktop\bot; $s="administrator@5.188.82.107"; $r="C:/ritzobet-bot"; $l="C:\Users\Administrator\Desktop\bot"; ssh -o StrictHostKeyChecking=no $s "New-Item -ItemType Directory -Path 'C:\ritzobet-bot' -Force | Out-Null"; scp -o StrictHostKeyChecking=no "$l\bot.py" "$l\config.json" "$l\.env" "$l\serve_apk.py" "$l\requirements.txt" "${s}:${r}\"; scp -o StrictHostKeyChecking=no -r "$l\assets" "$l\data" "${s}:${r}\"; if (Test-Path "$l\RitzoBet.apk") { scp -o StrictHostKeyChecking=no "$l\RitzoBet.apk" "${s}:${r}\" }; ssh $s "taskkill /F /IM python.exe 2>`$null; Start-Sleep 2; cd C:\ritzobet-bot; Start-Process python -ArgumentList 'serve_apk.py' -WindowStyle Hidden; Start-Sleep 1; Start-Process python -ArgumentList 'bot.py' -WindowStyle Hidden -RedirectStandardOutput 'bot.log' -RedirectStandardError 'bot.log'"; Write-Host 'Deploy done! APK: http://5.188.82.107:8080/RitzoBet.apk' -ForegroundColor Green
```

رمز هنگام درخواست: `H@d4SWfveqGF`

---

## توکن فعلی بات

توکن بات در فایل `.env` تنظیم شده است:
`8276515797:AAHyjNr6ICrEX5J3YfZS2fXIQsN8Flh5DBo`
